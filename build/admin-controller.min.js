/*! chewieez.github.io 2017-11-15 */

function validateForm(){let e=document.forms.adminBlogEntryForm["admin-blog-title"],t=document.forms.adminBlogEntryForm["admin-blog-author"],o=document.forms.adminBlogEntryForm["admin-blog-content"];return""===e.value?(alert("Error: \n\t• Name must be filled out\n\nPlease fix errors and resubmit"),!1):""===t.value?(alert("Error: \n\t• Author must be filled out\n\nPlease fix errors and resubmit"),!1):""!==o.value||(alert("Error: \n\t• Content must be filled out\n\nPlease fix errors and resubmit"),!1)}function clearBlogEntryForm(){document.forms.adminBlogEntryForm.reset()}function createButtonToBlogPage(){null===document.getElementById("btnToBlogs")&&(document.getElementById("new-button").innerHTML+='\n        <button id="btnToBlogs" class="btn btn-success">View Blogs</button>\n        '),document.getElementById("btnToBlogs").addEventListener("click",function(){window.location.href="http://localhost:8080/blog/index.html"})}const retrievedBlogDatabase=JSON.parse(localStorage.getItem("blogPosts"))||produceBlogDatabase();console.log("retrievedBlogDatabase is: ",retrievedBlogDatabase),retrievedBlogDatabase.blogArray=retrievedBlogDatabase.blogArray||[];let newBlogTitleEl=document.getElementById("admin-blog-title"),newBlogAuthorEl=document.getElementById("admin-blog-author"),newBlogContentEl=document.getElementById("admin-blog-content"),newBlogTagsEl=document.getElementById("admin-blog-tags");const saveBlogEl=document.getElementById("admin-save-blog");saveBlogEl.addEventListener("click",function(e){if(validateForm()){lastId=retrievedBlogDatabase.blogArray[0].id;const e=blogObjectFactory(newBlogTitleEl.value,newBlogContentEl.value,newBlogAuthorEl.value,newBlogTagsEl.value);retrievedBlogDatabase.blogArray.unshift(e),localStorage.setItem("blogPosts",JSON.stringify(retrievedBlogDatabase)),clearBlogEntryForm(),createButtonToBlogPage()}});